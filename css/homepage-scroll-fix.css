/* ============================================================
   HOMEPAGE-SCROLL-FIX.CSS
   Startseite: Kein Scroll (100vh fest)
   Flip Card ODER Evita geöffnet: Scroll erlaubt
   ============================================================ */

/* ===================
   1. JS-KLASSEN FÜR SCROLL-STEUERUNG
   =================== */

/* Kein Scroll (Startseite geschlossen) */
body.homepage-no-scroll {
    overflow: hidden !important;
    height: 100vh !important;
}

/* Scroll erlaubt (Flip/Evita offen) */
body.homepage-scroll-enabled {
    overflow-y: auto !important;
    height: auto !important;
}

/* ===================
   2. HERO ANPASSUNGEN MIT JS-KLASSEN
   =================== */

body.homepage-no-scroll #hero {
    height: calc(100vh - var(--header-height-desktop)) !important;
    max-height: calc(100vh - var(--header-height-desktop)) !important;
    overflow: hidden !important;
}

body.homepage-scroll-enabled #hero {
    height: auto !important;
    min-height: auto !important;
    max-height: none !important;
    overflow: visible !important;
}

/* ===================
   3. CSS :has() FALLBACK (Moderne Browser)
   Greift wenn JS nicht läuft
   =================== */

@supports selector(:has(*)) {
    /* Startseite ohne Flip = kein Scroll */
    body:has(.flip-container):not(:has(.flip-container.flipped)):not(.homepage-scroll-enabled):not(.homepage-no-scroll) {
        overflow: hidden;
        height: 100vh;
    }
    
    /* Geflippt = Scroll erlauben */
    body:has(.flip-container.flipped) {
        overflow-y: auto !important;
        height: auto !important;
    }
    
    /* Hero bei geflippter Card */
    body:has(.flip-container.flipped) #hero {
        height: auto !important;
        min-height: auto !important;
        max-height: none !important;
        overflow: visible !important;
    }
}

/* ===================
   4. MOBILE
   =================== */

@media (max-width: 768px) {
    body.homepage-no-scroll {
        height: 100dvh !important;
    }
    
    body.homepage-no-scroll #hero {
        height: calc(100dvh - var(--header-height-mobile)) !important;
    }
}
