/* ============================================================
   HOMEPAGE-SCROLL-FIX.CSS
   Startseite: Kein Scroll (100vh fest)
   Flip Card ODER Evita geöffnet: Scroll erlaubt
   ============================================================ */

/* ===================
   1. STARTSEITE - KEIN SCROLL
   Nur wenn weder Flip Card noch Evita (#view-third) sichtbar
   =================== */

/* Kein Scroll wenn:
   - Flip Container existiert
   - NICHT geflippt ist
   - UND view-third NICHT sichtbar ist */
body:has(#hero):has(.flip-container):not(:has(.flip-container.flipped)):not(:has(#view-third[style*="display: flex"])):not(:has(#view-third[style*="display: block"])) {
    overflow: hidden !important;
    height: 100vh !important;
}

/* Alternative Klasse für JS Fallback */
body.homepage-no-scroll {
    overflow: hidden !important;
    height: 100vh !important;
}

/* ===================
   2. FLIP CARD ODER EVITA GEÖFFNET - SCROLL ERLAUBEN
   =================== */

/* Scroll erlauben wenn Flip Card geflippt */
body:has(.flip-container.flipped) {
    overflow-y: auto !important;
    height: auto !important;
}

/* Scroll erlauben wenn Evita (#view-third) sichtbar */
body:has(#view-third[style*="display: flex"]),
body:has(#view-third[style*="display: block"]) {
    overflow-y: auto !important;
    height: auto !important;
}

/* Alternative Klasse für JS Fallback */
body.homepage-scroll-enabled {
    overflow-y: auto !important;
    height: auto !important;
}

/* ===================
   3. HERO SECTION - FESTE HÖHE
   =================== */

/* Standard Hero - volle Bildschirmhöhe ohne Overflow */
#hero:not(:has(.flip-container.flipped)):not(:has(#view-third[style*="display: flex"])):not(:has(#view-third[style*="display: block"])) {
    height: 100vh !important;
    max-height: 100vh !important;
    overflow: hidden !important;
}

/* Hero mit geflippter Card ODER Evita sichtbar - darf wachsen */
#hero:has(.flip-container.flipped),
#hero:has(#view-third[style*="display: flex"]),
#hero:has(#view-third[style*="display: block"]) {
    height: auto !important;
    min-height: 100vh !important;
    overflow: visible !important;
}

/* ===================
   4. MOBILE ANPASSUNGEN
   =================== */

@media (max-width: 768px) {
    body:has(#hero):has(.flip-container):not(:has(.flip-container.flipped)):not(:has(#view-third[style*="display: flex"])):not(:has(#view-third[style*="display: block"])) {
        overflow: hidden !important;
        height: 100vh !important;
        height: 100dvh !important;
    }
    
    body.homepage-no-scroll {
        height: 100dvh !important;
    }
    
    #hero:not(:has(.flip-container.flipped)):not(:has(#view-third[style*="display: flex"])):not(:has(#view-third[style*="display: block"])) {
        height: calc(100vh - var(--header-height-mobile)) !important;
        height: calc(100dvh - var(--header-height-mobile)) !important;
        max-height: none !important;
    }
}
