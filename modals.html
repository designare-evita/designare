<div id="search-modal" class="modal-overlay">
    <div class="modal-content search-modal-content">
        <button id="close-search-modal" class="close-button">&times;</button>
        
        <div class="search-header">
            <h2>Wonach suchst du?</h2>
            <div class="search-input-wrapper">
                <i class="fa-solid fa-magnifying-glass search-icon"></i>
                <input type="text" id="site-search-input" placeholder="Tippe einen Suchbegriff..." autocomplete="off">
            </div>
        </div>

        <div class="search-body">
            <div id="search-results-container" style="display: none;">
                <h3>Ergebnisse</h3>
                <ul id="search-results-list"></ul>
            </div>
            
            </div>
    </div>
</div>

<div id="ai-response-modal" class="modal-overlay">
    <div class="modal-content ai-modal-content">
        
        <div class="ai-header-controls">
            <div class="window-controls">
                <span class="control-dot red" id="close-ai-response-modal-top"></span>
                <span class="control-dot yellow"></span>
                <span class="control-dot green"></span>
            </div>
        </div>
        
        <div class="ai-header">
            <div class="ai-avatar-wrapper">
                <img src="images/Evita.png" alt="Evita AI" class="ai-avatar-img">
                <div class="ai-status-indicator online"></div>
            </div>
            <div class="ai-title-wrapper">
                <h2>Evita <span class="ai-badge">AI 2.0</span></h2>
                <p>Digitale Komplizin & Code-W√§chterin</p>
            </div>
        </div>

        <div class="ai-body">
            <div id="ai-chat-history" class="chat-history">
                </div>
            
            <form id="ai-chat-form" class="ai-input-area">
                <div class="input-wrapper">
                    <input type="text" id="ai-chat-input" placeholder="Frag mich etwas √ºber Michaels Arbeit..." autocomplete="off">
                    <button type="submit" class="send-btn" aria-label="Senden">
                        <i class="fa-regular fa-paper-plane"></i>
                    </button>
                </div>
            </form>
        </div>
        
        <div class="ai-footer">
            <p><i class="fa-solid fa-bolt"></i> Powered by RAG-Architecture & Vector DB</p>
        </div>
    </div>
</div>

<div id="booking-modal" class="modal-overlay">
    <div class="modal-content booking-modal-content">
        <button id="close-booking-modal" class="close-button">&times;</button>
        
        <div class="booking-header">
            <h2>Termin vereinbaren</h2>
            <p>Lass uns √ºber dein Projekt sprechen.</p>
        </div>

        <div class="booking-body">
            <div class="calendly-inline-widget" data-url="https://calendly.com/michael-kanda/30min" style="min-width:320px;height:630px;"></div>
            <script type="text/javascript" src="https://assets.calendly.com/assets/external/widget.js" async></script>
        </div>
    </div>
</div>

<div id="cookie-info-lightbox" class="modal-overlay">
    <div class="modal-content cookie-content">
        <div class="cookie-icon-wrapper">
            <i class="fa-solid fa-cookie-bite"></i>
        </div>
        <h3>Datenschutz & Cookies</h3>
        <p>
            Ich nutze <strong>keine Tracking-Cookies</strong> und kein Google Analytics. 
            Diese Seite speichert nur deine bevorzugte Theme-Einstellung (Dark/Light Mode) lokal auf deinem Ger√§t.
        </p>
        <p class="cookie-subtext">
            Warum? Weil Privatsph√§re wichtig ist. Evita liest mit, aber sie beh√§lt es f√ºr sich.
        </p>
        <div class="cookie-lightbox-buttons">
            <button id="acknowledge-cookie-lightbox" class="lightbox-button primary">Alles klar!</button>
            <button id="privacy-policy-link-button" class="lightbox-button secondary">Datenschutzerkl√§rung</button>
        </div>
    </div>
</div>

<div id="contact-modal" class="modal-overlay">
    <div class="modal-content contact-modal-content">
        <button id="close-modal" class="close-button">&times;</button>
        <h2>Kontakt aufnehmen</h2>
        <p>Schreib mir eine Nachricht ‚Äì ich melde mich so schnell wie m√∂glich.</p>
        
        <form id="contact-form-inner">
            <div class="form-group">
                <label for="contact-name">Name</label>
                <input type="text" id="contact-name" name="name" required placeholder="Dein Name">
            </div>
            
            <div class="form-group">
                <label for="contact-email">E-Mail</label>
                <input type="email" id="contact-email" name="email" required placeholder="deine@email.com">
            </div>
            
            <div class="form-group">
                <label for="contact-message">Nachricht</label>
                <textarea id="contact-message" name="message" rows="5" required placeholder="Wie kann ich helfen?"></textarea>
            </div>
            
            <div style="display:none;">
                <label for="contact-honeypot">Nicht ausf√ºllen:</label>
                <input type="text" id="contact-honeypot" name="honeypot">
            </div>

            <button type="submit" class="submit-btn">Ab die Post!</button>
        </form>
        
        <div id="contact-success-message" style="display: none; text-align: center;">
            <i class="fa-regular fa-paper-plane" style="font-size: 3rem; color: var(--accent-color); margin-bottom: 20px;"></i>
            <h3>Nachricht gesendet!</h3>
            <p>Danke f√ºr deine Nachricht. Ich melde mich in K√ºrze bei dir.</p>
            <button id="close-success-message" class="submit-btn" style="margin-top: 20px;">Schlie√üen</button>
        </div>
    </div>
</div>

<div id="legal-modal" class="modal-overlay">
    <div class="modal-content legal-modal-content">
        <button id="close-legal-modal" class="close-button">&times;</button>
        <div id="legal-modal-content-area">
            </div>
    </div>
</div>

<div style="display: none;">
    <div id="about-me-content">
        <div class="legal-container">
            <h1>√úber Michael Kanda</h1>
            <p class="intro-text"><strong>Web-Purist, KI-Komplize und Detail-Fanatiker.</strong></p>
            
            <div class="about-grid">
                <div class="about-text">
                    <h2 class="about-section-header">Der Mann hinter den Pixeln</h2>
                    <p>
                        Ich baue keine 08/15-Webseiten. Ich baue digitale Ma√üanz√ºge. Mein Ansatz ist radikal: 
                        Weg mit dem Ballast, her mit der Performance. In einer Welt voller aufgebl√§hter PageBuilder 
                        und langsamer Ladezeiten setze ich auf handgeschriebenen Code, semantisches HTML und 
                        intelligente Architektur.
                    </p>
                    <p>
                        Seit √ºber 10 Jahren bewege ich mich im digitalen Raum. Angefangen hat alles mit der Faszination, 
                        wie aus Zeilen Code funktionierende Welten entstehen. Heute kombiniere ich dieses Handwerk 
                        mit der Power moderner KI-Systeme.
                    </p>

                    <h2 class="about-section-header">Meine Philosophie: "Digitaler Purismus"</h2>
                    <ul>
                        <li><strong>Code is Art:</strong> Jeder Tag, jede Klasse, jede Funktion hat einen Zweck. Kein unn√∂tiger M√ºll.</li>
                        <li><strong>Performance First:</strong> Eine Webseite muss rennen, nicht humpeln. Google liebt Speed, Nutzer auch.</li>
                        <li><strong>KI als Werkzeug:</strong> K√ºnstliche Intelligenz ist kein Hype, sondern der Turbo f√ºr Entwicklung und Content.</li>
                    </ul>
                </div>
                <div class="about-image">
                    <img src="images/Michael.webp" alt="Michael Kanda Portrait" loading="lazy">
                    <p class="image-caption">Michael Kanda & Evita (die Digitale)</p>
                </div>
            </div>

            <hr class="legal-separator">

            <h2>Doch Michael ist mehr als nur Code und Pixel</h2>
            <p>
                Wenn ich nicht gerade vor dem Bildschirm sitze (oder stehe), findet man mich wahrscheinlich hier:
            </p>

            <div class="hobbies-grid">
                <div class="hobby-item">
                    <i class="fa-solid fa-paw"></i>
                    <h3>Tierschutz & Evita</h3>
                    <p>Mein Herz schl√§gt f√ºr Tiere. Meine H√ºndin Evita (das Original, nicht die KI) kommt aus dem Tierschutz. Sie ist Chefin, Muse und der Grund, warum ich regelm√§√üig Pausen mache (machen muss).</p>
                </div>
                <div class="hobby-item">
                    <i class="fa-solid fa-dumbbell"></i>
                    <h3>Sport & Ausgleich</h3>
                    <p>Ein gesunder Geist braucht einen gesunden K√∂rper. Sport ist mein Ventil, um den Kopf freizubekommen und neue Energie f√ºr komplexe Probleml√∂sungen zu tanken.</p>
                </div>
                <div class="hobby-item">
                    <i class="fa-solid fa-mug-hot"></i>
                    <h3>Kaffee-Kultur</h3>
                    <p>Ja, das Klischee stimmt. Ohne guten Kaffee l√§uft nichts. Aber bitte kein Automaten-Kaffee, sondern mit Liebe zubereitet. Qualit√§t vor Quantit√§t ‚Äì wie beim Code.</p>
                </div>
            </div>

            <div class="cta-box">
                <h3>Lust auf Zusammenarbeit?</h3>
                <p>Genug √ºber mich. Lass uns √ºber dein Projekt sprechen!</p>
                <button id="about-contact-btn" class="cta-button" onclick="document.getElementById('contact-button').click(); document.getElementById('close-legal-modal').click();">Kontakt aufnehmen</button>
            </div>
        </div>
    </div>
</div>

<script>
// Chat-Formular Backup-Handler (f√ºr alle F√§lle)
document.addEventListener('DOMContentLoaded', function() {
    let chatSubmitBackup = false;
    
    const setupChatBackup = function() {
        const chatForm = document.getElementById('ai-chat-form');
        const chatInput = document.getElementById('ai-chat-input');
        
        if (chatForm && chatInput && !chatSubmitBackup) {
            console.log('üîß Richte Chat-Backup-Handler ein...');
            
            // Backup Submit Handler
            chatForm.addEventListener('submit', function(e) {
                console.log('üîß Chat-Backup-Submit ausgel√∂st');
            });
            
            // Backup Enter-Handler
            chatInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    console.log('üîß Chat-Backup-Enter ausgel√∂st');
                    e.preventDefault();
                    chatForm.dispatchEvent(new Event('submit', {bubbles: true}));
                }
            });
            
            chatSubmitBackup = true;
        }
    };
    
    // Versuche Chat-Backup sofort und nach kurzer Verz√∂gerung
    setupChatBackup();
    setTimeout(setupChatBackup, 500);
    setTimeout(setupChatBackup, 1000);
    
    // √úberwache Modal-√Ñnderungen f√ºr dynamisch geladene Inhalte
    const observer = new MutationObserver(function(mutations) {
        mutations.forEach(function(mutation) {
            if (mutation.type === 'childList') {
                setupChatBackup();
            }
        });
    });
    
    const modalContainer = document.getElementById('modal-container');
    if (modalContainer) {
        observer.observe(modalContainer, {
            childList: true,
            subtree: true
        });
    }
});
</script>
